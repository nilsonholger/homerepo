Homerepo
=========

Homerepo manages a directory of git/svn/mercurial/cvs repositories.
It pulls changes to the repositories and if necessary builds them and updates
their installation.

------

Index
======

* `Bugs and Pull Requests`_
* `History`_
* `Setup`_
* `Usage`_
* `Output and Logging`_
* `Chicken and Eggs`_
* `Final Notice`_
* `License`_

-----------------------

Bugs and Pull Requests
=======================

This is just a small, rather thrown together script I created because I was in
need of it. If you find any bugs, do not hesitate and contact me @: nilsonholger
*(a)* hyve *(.)* org. If you feel like using a Pull Request (I suppose this will
never happen), that's also fine.

--------

History
========

Sometimes you work in an environment where you have no rights to install the
software you are used to work with or need to get your job done. So you start to
pull sources of different tools, configure them to install into your $HOME,
build and install them. How do you keep these up to date? Going through all your
installed software is way to tedious for more than just a handful of tools.
But worry no more, this is exactly where homerepo comes in handy.

------

Setup
======

Just clone the repository and use it right away (or get the homerepo script
directly here: https://raw.github.com/nilsonholger/homerepo/master/homerepo).
For a more permament setup, just drop (or link) the homerepo script somewhere in
your *$PATH*.

At its first run, homerepo will create::

    .config/homerepo/
    .config/homerepo/config

The config will look like::

    # HOMEREPO CONFIG

    # base directory of repositories you want homerepo to manage
    _SRCDIR="$HOME/local/homerepo"

    # update order, if none is found, all subdirectories of $_SRSDIR will be
    # updated in alphabetical order
    #
    # format (empty lines are possible, NOTHING else, no comments etc.):
    # directory1
    # directory2
    # ...
    _UPDATE_ORDER="$HOME/.config/homerepo/order"

    # log file location
    _LOGFILE="$HOME/.cache/homerepo.log"

Please modify the just created config file to your liking. Personally, I prefer
to use *$HOME/local/homerepo* for my repositories, so it is already set as a
default.
I have setup all my local software to install to *$HOME/local* by using for
example::

    ./configure --prefix=$HOME/local
    cmake -DCMAKE_INSTALL_PREFIX=$HOME/local

If you choose to also do so, you could modify *$PATH* and other environment
variables accordingly, so other programs and tools will find these::

    export PATH="$PATH:$HOME/local/bin"
    export LIBRARY_PATH="$HOME/local/lib" # add e.g. lib32/lib64
    export LD_LIBRARY_PATH...
    export LD_RUN_PATH...
    export C_INCLUDE_PATH="$HOME/local/include"
    export CPLUS_INCLUDE_PATH=...
    ...

------

Usage
======

Running **homerepo** without any arguments gives::

    usage: /home/dkoester/local/bin/homerepo <command>

        list                            list update order of repositories
        upgrade [<repo1> [<repo...>]]   upgrade given (or all) repositories
        help                            guess what you're looking at...

So **homerepo upgrade** will upgrade all repositories either in the specified
order from *$_CONFDIR/order* or simply all existing directories found in
*$_SRCDIR*. To check the currently used order, use **homerepo list**.

-------------------

Output and Logging
===================

**homerepo** will print and log all output generated by e.g. **git pull** or
**make**/**make install** as well as show a summary of all operations at the end.
The log will reside in *$_LOGFILE* (defaults to *$HOME/.cache/homerepo.log*).
A short example of that output::

    +++ gcc [SUBVERSION]
    +++ llvm/tools/clang [GIT]
    !!! llvm/tools/clang [GIT] BUILD FAILED
    +++ llvm [GIT]
    === ack [GIT]
    === cloc [SUBVERSION]
    === homerepo [GIT]
    === dmenu [MERCURIAL]
    === git [GIT]
    +++ rxvt-unicode [CVS]

-----------------

Chicken and Eggs
=================

**homerepo** can of course manage itself, just put your homerepo checkout into
*$HOME/local/homerepo/homerepo* (or use
'git clone https://github.com/nilsonholger/homerepo.git ~/local/homerepo/homerepo)
and homerepo will hapily do so.

-------------

Final Notice
=============

Have fun and keep it local ;-)

--------

License
========

Copyright (C) 2012 nilsonholger (a) hyve (dot) org

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
